\ 2013-10-26

( В некоторых случаях, когда исключение это нонсенс, полезно в логе
  иметь больше информации о месте исключения относительно исходного кода.
  Слово THROW-DUMP выводит дамп стека возвратов перед броском исключения,
  и оно предназначено для использования вместо THROW в таких случаях.
)
: THROW-DUMP ( i*x 0 -- i*x | i*x ior -- j*x )
  DUP 0= IF DROP EXIT THEN
  R@ OVER ( ior addr ior )
  DUMP-EXCEPTION-HEADER
  R0 @ RP@ DUMP-TRACE-SHRUNKEN
  THROW
;
